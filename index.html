<html>
<head>
    <script
            src="http://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
            crossorigin="anonymous">

    </script>
</head>
<body>



<h1>this is akka s first page </h1>


<!--game rules begin -->


<!--game rules end -->
<table id="table_head">
    <tr>
        <td>address</td>
        <td>value</td>
    </tr>


</table>
<script language="JavaScript">
    console.log($);
    console.log('hello world');

    function handle_data(data) {
        var entries = data['result'];
        var book = {};
        entries.map(function(en, index){

            if(typeof book[en['from']] === 'undefined'){
                book[en['from']] = 0;
            }
            book[en['from']] += parseInt(en['value']);

            console.log( en['from'] + ': ' + en['value'] +': ' + index);
        });

        return book ;
    }

    function render_data(book) {

        for(var key in book){
            var the_str = '<tr><td>'+ key +'</td><td>' + book[key] + '</td></tr>';
            $('#table_head tr:last').after($(the_str));
        }

        console.log(book);
        return ;
    }

    function data_ok(data){
        console.log(data);
        var book = handle_data(data);
        render_data(book);
        return ;
    }


    function data_fail(data){
        console.log(data);
    }

    function run(){
        $.when($.ajax({
            url: 'http://api-ropsten.etherscan.io/api?module=account&action=txlist&address=0x473D26F188DBC6F8e37b6d3Ad4775207Be9A7c7D&startblock=0&endblock=99999999&sort=asc&apikey=YourApiKeyToken',
            method: 'GET',
        })).then(data_ok, data_fail)
    }

    $(run);

</script>

</body>
</html>